<UserControl
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:issue="clr-namespace:ManaxClient.ViewModels.Issue"
    xmlns:previews="clr-namespace:ManaxClient.Controls.Previews"
    mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
    x:Class="ManaxClient.Views.Issue.IssuesPageView"
    x:DataType="issue:IssuesPageViewModel">

    <ScrollViewer>
        <StackPanel Margin="24" Spacing="24">
            <TextBlock Text="Gestion des Problèmes"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="#212529" />

            <StackPanel Orientation="Horizontal" Spacing="16">
                <ToggleButton x:Name="AutomaticToggle"
                              Content="Automatiques"
                              IsChecked="{Binding ShowAutomaticIssues}"
                              Padding="12,8"
                              CornerRadius="8"
                              Background="#E9ECEF"
                              Foreground="#495057"
                              BorderThickness="0" />

                <ToggleButton x:Name="ReportedToggle"
                              Content="Signalés"
                              IsChecked="{Binding !ShowAutomaticIssues}"
                              Padding="12,8"
                              CornerRadius="8"
                              Background="#E9ECEF"
                              Foreground="#495057"
                              BorderThickness="0" />

                <Border Width="1" Height="24" Background="#DEE2E6" VerticalAlignment="Center" />

                <ToggleButton x:Name="ChapterToggle"
                              Content="Chapitres"
                              IsChecked="{Binding ShowChapterIssues}"
                              Padding="12,8"
                              CornerRadius="8"
                              Background="#E9ECEF"
                              Foreground="#495057"
                              BorderThickness="0" />

                <ToggleButton x:Name="SerieToggle"
                              Content="Séries"
                              IsChecked="{Binding !ShowChapterIssues}"
                              Padding="12,8"
                              CornerRadius="8"
                              Background="#E9ECEF"
                              Foreground="#495057"
                              BorderThickness="0" />
            </StackPanel>

            <StackPanel Spacing="16">
                <StackPanel IsVisible="{Binding ShowAutomaticIssues}">
                    <StackPanel IsVisible="{Binding ShowChapterIssues}" Spacing="12">
                        <TextBlock Text="Problèmes Automatiques - Chapitres"
                                   FontSize="18"
                                   FontWeight="SemiBold"
                                   Foreground="#495057" />

                        <ItemsControl ItemsSource="{Binding AllAutomaticChapterIssues}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <previews:AutomaticChapterIssuePreview Issue="{Binding}"
                                                                           Margin="0,0,0,8" />
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <TextBlock Text="Aucun problème automatique de chapitre trouvé"
                                   FontStyle="Italic"
                                   Foreground="#6C757D"
                                   IsVisible="{Binding AllAutomaticChapterIssues.Count, Converter={x:Static StringConverters.IsNullOrEmpty}}" />
                    </StackPanel>

                    <StackPanel IsVisible="{Binding !ShowChapterIssues}" Spacing="12">
                        <TextBlock Text="Problèmes Automatiques - Séries"
                                   FontSize="18"
                                   FontWeight="SemiBold"
                                   Foreground="#495057" />

                        <ItemsControl ItemsSource="{Binding AllAutomaticSerieIssues}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <previews:AutomaticSerieIssuePreview Issue="{Binding}"
                                                                         Margin="0,0,0,8" />
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <TextBlock Text="Aucun problème automatique de série trouvé"
                                   FontStyle="Italic"
                                   Foreground="#6C757D"
                                   IsVisible="{Binding AllAutomaticSerieIssues.Count, Converter={x:Static StringConverters.IsNullOrEmpty}}" />
                    </StackPanel>
                </StackPanel>

                <StackPanel IsVisible="{Binding !ShowAutomaticIssues}">
                    <StackPanel IsVisible="{Binding ShowChapterIssues}" Spacing="12">
                        <TextBlock Text="Problèmes Signalés - Chapitres"
                                   FontSize="18"
                                   FontWeight="SemiBold"
                                   Foreground="#495057" />

                        <ItemsControl ItemsSource="{Binding AllReportedChapterIssues}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <previews:ReportedChapterIssuePreview Issue="{Binding}"
                                                                          Margin="0,0,0,8" />
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <TextBlock Text="Aucun problème signalé de chapitre trouvé"
                                   FontStyle="Italic"
                                   Foreground="#6C757D"
                                   IsVisible="{Binding AllReportedChapterIssues.Count, Converter={x:Static StringConverters.IsNullOrEmpty}}" />
                    </StackPanel>

                    <StackPanel IsVisible="{Binding !ShowChapterIssues}" Spacing="12">
                        <TextBlock Text="Problèmes Signalés - Séries"
                                   FontSize="18"
                                   FontWeight="SemiBold"
                                   Foreground="#495057" />

                        <ItemsControl ItemsSource="{Binding AllReportedSerieIssues}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <previews:ReportedSerieIssuePreview Issue="{Binding}"
                                                                        Margin="0,0,0,8" />
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <TextBlock Text="Aucun problème signalé de série trouvé"
                                   FontStyle="Italic"
                                   Foreground="#6C757D"
                                   IsVisible="{Binding AllReportedSerieIssues.Count, Converter={x:Static StringConverters.IsNullOrEmpty}}" />
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>